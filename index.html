<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Debt Payoff Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 10px;
    }

    .container {
        max-width: 1600px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .header {
        background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
        color: white;
        padding: 20px;
        text-align: center;
    }

    .header h1 {
        font-size: 2rem;
        margin-bottom: 5px;
        font-weight: 300;
    }

    .header p {
        font-size: 1rem;
        opacity: 0.9;
    }

    .page-selector {
        display: flex;
        justify-content: center;
        background: rgba(255,255,255,0.1);
        margin: 15px 20px 0 20px;
        border-radius: 10px;
        padding: 5px;
    }

    .page-btn {
        flex: 1;
        padding: 12px;
        background: transparent;
        color: white;
        border: none;
        border-radius: 7px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        font-size: 1rem;
    }

    .page-btn.active {
        background: white;
        color: #2c3e50;
    }

    .main-content {
        padding: 20px;
    }

    .page-content {
        display: none;
    }

    .page-content.active {
        display: block;
    }

    .section {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        border: 1px solid #e9ecef;
    }

    .section h2 {
        color: #2c3e50;
        margin-bottom: 20px;
        font-size: 1.4rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-group label {
        margin-bottom: 5px;
        font-weight: 600;
        color: #2c3e50;
        font-size: 0.9rem;
    }

    .form-group input, .form-group select {
        padding: 10px;
        border: 2px solid #e9ecef;
        border-radius: 6px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: white;
    }

    .form-group input:focus, .form-group select:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .debt-item {
        background: white;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        border: 2px solid #e9ecef;
        position: relative;
    }

    .debt-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        flex-wrap: wrap;
        gap: 10px;
    }

    .debt-name {
        font-weight: 600;
        color: #2c3e50;
        flex: 1;
        min-width: 150px;
        border: 1px solid #e9ecef;
        padding: 8px;
        border-radius: 4px;
    }

    .remove-debt-btn {
        background: #e74c3c;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
    }

    .add-debt-btn {
        background: #27ae60;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        width: 100%;
        margin-bottom: 15px;
    }

    .strategy-selector {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        margin-bottom: 20px;
    }

    .strategy-option {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .strategy-option.active {
        border-color: #3498db;
        background: #e8f4f8;
    }

    .strategy-option h4 {
        color: #2c3e50;
        margin-bottom: 5px;
        font-size: 1rem;
    }

    .strategy-option p {
        font-size: 0.8rem;
        color: #6c757d;
    }

    .calculate-btn {
        width: 100%;
        padding: 15px;
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 20px 0;
    }

    .calculate-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 15px rgba(46, 204, 113, 0.3);
    }

    .results {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .result-card {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        border-left: 4px solid #3498db;
    }

    .result-card h4 {
        color: #2c3e50;
        margin-bottom: 5px;
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .result-card .value {
        font-size: 1.3rem;
        font-weight: 700;
        color: #27ae60;
    }

    .result-card .sub-value {
        font-size: 0.8rem;
        color: #6c757d;
    }

    .chart-container {
        background: white;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .chart-tabs {
        display: flex;
        margin-bottom: 15px;
        background: #f8f9fa;
        border-radius: 6px;
        padding: 3px;
        overflow-x: auto;
        flex-wrap: wrap;
    }

    .chart-tab {
        flex: 1;
        padding: 8px 12px;
        text-align: center;
        background: transparent;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        color: #6c757d;
        transition: all 0.3s ease;
        white-space: nowrap;
        font-size: 0.9rem;
        min-width: 120px;
    }

    .chart-tab.active {
        background: white;
        color: #2c3e50;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .chart-area {
        position: relative;
        height: 350px;
    }

    .comparison-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .comparison-card {
        background: white;
        border-radius: 8px;
        padding: 15px;
        border: 2px solid #e9ecef;
    }

    .comparison-card h3 {
        color: #2c3e50;
        margin-bottom: 10px;
        text-align: center;
    }

    .comparison-card.winner {
        border-color: #27ae60;
        background: #f8fff8;
    }

    .comparison-card.winner::before {
        content: "üèÜ BEST STRATEGY";
        display: block;
        text-align: center;
        background: #27ae60;
        color: white;
        padding: 5px;
        margin: -15px -15px 10px -15px;
        border-radius: 6px 6px 0 0;
        font-size: 0.8rem;
        font-weight: bold;
    }

    .debt-summary-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        font-size: 0.9rem;
    }

    .debt-summary-table th,
    .debt-summary-table td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #e9ecef;
    }

    .debt-summary-table th {
        background: #2c3e50;
        color: white;
        font-weight: 600;
    }

    .debt-summary-table tr:nth-child(even) {
        background: #f8f9fa;
    }

    .payment-schedule {
        max-height: 350px;
        overflow-y: auto;
        border: 1px solid #e9ecef;
        border-radius: 8px;
    }

    .schedule-header {
        display: grid;
        grid-template-columns: 80px 100px 100px 100px 100px;
        gap: 5px;
        padding: 10px;
        background: #2c3e50;
        color: white;
        font-weight: 600;
        font-size: 0.8rem;
        position: sticky;
        top: 0;
    }

    .schedule-row {
        display: grid;
        grid-template-columns: 80px 100px 100px 100px 100px;
        gap: 5px;
        padding: 8px 10px;
        border-bottom: 1px solid #e9ecef;
        font-size: 0.8rem;
    }

    .schedule-row:nth-child(even) {
        background: #f8f9fa;
    }

    .bonus-payments {
        background: white;
        border-radius: 8px;
        padding: 15px;
        margin-top: 15px;
        border: 2px solid #e9ecef;
    }

    .bonus-payments h3 {
        color: #2c3e50;
        margin-bottom: 10px;
        font-size: 1rem;
    }

    .bonus-payment-row {
        display: grid;
        grid-template-columns: 1fr 1fr auto;
        gap: 10px;
        margin-bottom: 10px;
        align-items: end;
    }

    .add-bonus-btn {
        padding: 8px 15px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.9rem;
        width: fit-content;
    }

    .remove-bonus-btn {
        padding: 8px 10px;
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
    }

    .auto-populate-notice {
        background: #e8f4f8;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 0 8px 8px 0;
    }

    .auto-populate-notice h3 {
        color: #2c3e50;
        margin-bottom: 5px;
        font-size: 1rem;
    }

    .auto-populate-notice p {
        color: #6c757d;
        font-size: 0.9rem;
    }

    .sync-btn {
        background: #3498db;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        margin-top: 10px;
    }

    @media (max-width: 768px) {
        .header h1 {
            font-size: 1.5rem;
        }
        
        .header p {
            font-size: 0.9rem;
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .strategy-selector {
            grid-template-columns: 1fr;
        }

        .results {
            grid-template-columns: repeat(2, 1fr);
        }

        .chart-area {
            height: 250px;
        }

        .debt-summary-table {
            font-size: 0.8rem;
        }

        .debt-summary-table th,
        .debt-summary-table td {
            padding: 6px 4px;
        }

        .schedule-header, .schedule-row {
            grid-template-columns: 60px 80px 80px 80px 80px;
            font-size: 0.7rem;
        }

        .comparison-container {
            grid-template-columns: 1fr;
        }

        .chart-tabs {
            flex-wrap: wrap;
        }

        .chart-tab {
            min-width: 100px;
            font-size: 0.8rem;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ Ultimate Debt Payoff Calculator</h1>
            <p>Complete debt analysis with smart payoff strategies and detailed payment tracking</p>

```
        <div class="page-selector">
            <button class="page-btn active" onclick="switchPage('summary')">üìä Summary & Analysis</button>
            <button class="page-btn" onclick="switchPage('entry')">üìù Debt Entry</button>
        </div>
    </div>

    <div class="main-content">
        <!-- Summary Page -->
        <div id="summary-page" class="page-content active">
            <!-- Auto-populate notice -->
            <div class="auto-populate-notice">
                <h3>üí° Smart Data Sync</h3>
                <p>Data automatically syncs from your Debt Entry page. If no debts are entered there, use the fields below for single debt analysis.</p>
                <button class="sync-btn" onclick="syncFromDebtEntry()">üîÑ Sync from Debt Entry</button>
            </div>

            <!-- Single Debt Analysis (when no debts in entry page) -->
            <div id="single-debt-section" class="section">
                <h2>üìä Debt Analysis</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="singlePrincipal">Current Balance ($)</label>
                        <input type="number" id="singlePrincipal" value="25000" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="singleInterestRate">Annual Interest Rate (%)</label>
                        <input type="number" id="singleInterestRate" value="18.5" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="singleMinPayment">Minimum Monthly Payment ($)</label>
                        <input type="number" id="singleMinPayment" value="500" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="singleExtraPayment">Extra Monthly Payment ($)</label>
                        <input type="number" id="singleExtraPayment" value="200" step="0.01">
                    </div>
                </div>
            </div>

            <!-- Multi-Debt Strategy Section (when debts exist) -->
            <div id="multi-debt-section" class="section" style="display: none;">
                <h2>üéØ Payoff Strategy</h2>
                <div class="strategy-selector">
                    <div class="strategy-option active" data-strategy="avalanche">
                        <h4>üíé Avalanche</h4>
                        <p>Pay minimums on all debts, extra goes to highest interest rate</p>
                    </div>
                    <div class="strategy-option" data-strategy="snowball">
                        <h4>‚õÑ Snowball</h4>
                        <p>Pay minimums on all debts, extra goes to smallest balance</p>
                    </div>
                    <div class="strategy-option" data-strategy="custom">
                        <h4>üîß Custom</h4>
                        <p>Set your own payment priorities</p>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="totalExtraPayment">Total Extra Monthly Payment ($)</label>
                        <input type="number" id="totalExtraPayment" value="300" step="0.01">
                    </div>
                </div>
            </div>

            <!-- Bonus Payments -->
            <div class="section">
                <h2>üéØ Bonus/Windfall Payments</h2>
                <div id="bonusPayments">
                    <div class="bonus-payment-row">
                        <div>
                            <label>Month</label>
                            <input type="number" class="bonus-month" value="6" min="1">
                        </div>
                        <div>
                            <label>Amount ($)</label>
                            <input type="number" class="bonus-amount" value="2000" step="0.01">
                        </div>
                        <button type="button" class="remove-bonus-btn" onclick="removeBonusPayment(this)">‚úï</button>
                    </div>
                </div>
                <button type="button" class="add-bonus-btn" onclick="addBonusPayment()">+ Add Bonus Payment</button>
            </div>

            <button class="calculate-btn" onclick="calculatePayoffPlan()">üìä Calculate Payoff Plan</button>

            <!-- Strategy Comparison -->
            <div id="strategy-comparison" style="display: none;">
                <div class="section">
                    <h2>‚öñÔ∏è Strategy Comparison</h2>
                    <div class="comparison-container" id="comparisonContainer">
                        <!-- Comparison cards will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results-section" style="display: none;">
                <div class="section">
                    <h2>üìà Results Summary</h2>
                    <div class="results" id="results">
                        <!-- Results will be populated here -->
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="chart-container">
                    <div class="chart-tabs">
                        <button class="chart-tab active" onclick="showChart('balance')">Balance Timeline</button>
                        <button class="chart-tab" onclick="showChart('payments')">Payment Breakdown</button>
                        <button class="chart-tab" onclick="showChart('schedule')">Payment Schedule</button>
                        <button class="chart-tab" onclick="showChart('summary')">Debt Summary</button>
                        <button class="chart-tab" onclick="showChart('interest')">Interest Analysis</button>
                    </div>

                    <div class="chart-area">
                        <canvas id="balanceChart" style="display: block;"></canvas>
                        <canvas id="paymentsChart" style="display: none;"></canvas>
                        <canvas id="interestChart" style="display: none;"></canvas>
                        <div id="scheduleChart" style="display: none;" class="payment-schedule">
                            <!-- Schedule will be populated here -->
                        </div>
                        <div id="summaryTable" style="display: none; height: 100%; overflow-y: auto;">
                            <!-- Summary table will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Debt Entry Page -->
        <div id="entry-page" class="page-content">
            <div class="section">
                <h2>üìù Enter Your Debts</h2>
                <p style="color: #6c757d; margin-bottom: 20px;">Add all your debts here. Data will automatically sync to the Summary page for analysis.</p>
                
                <div id="debts-container">
                    <!-- Debts will be added here -->
                </div>
                <button class="add-debt-btn" onclick="addDebt()">+ Add New Debt</button>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="calculate-btn" onclick="switchPage('summary'); calculatePayoffPlan();">üìä Go to Summary & Calculate</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let debts = [];
    let currentStrategy = 'avalanche';
    let currentPage = 'summary';
    let balanceChart, paymentsChart, interestChart;
    let currentResults = null;

    // Page switching
    function switchPage(page) {
        currentPage = page;
        
        // Update button appearance
        document.querySelectorAll('.page-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        // Show/hide content
        document.querySelectorAll('.page-content').forEach(content => content.classList.remove('active'));
        document.getElementById(page + '-page').classList.add('active');

        // Update summary page based on debt entry data
        if (page === 'summary') {
            updateSummaryPage();
        }
    }

    // Update summary page based on debt entry data
    function updateSummaryPage() {
        const hasDebts = debts.length > 0 && debts.some(d => d.balance > 0);
        
        if (hasDebts) {
            // Show multi-debt mode
            document.getElementById('single-debt-section').style.display = 'none';
            document.getElementById('multi-debt-section').style.display = 'block';
            
            // Auto-populate total from debts
            const totalMinPayments = debts.reduce((sum, debt) => sum + (debt.minimumPayment || 0), 0);
            document.getElementById('totalExtraPayment').value = Math.max(300, Math.round(totalMinPayments * 0.2));
        } else {
            // Show single debt mode
            document.getElementById('single-debt-section').style.display = 'block';
            document.getElementById('multi-debt-section').style.display = 'none';
        }
    }

    // Sync data from debt entry
    function syncFromDebtEntry() {
        updateSummaryPage();
        
        if (debts.length > 0) {
            // Show feedback
            const notice = document.querySelector('.auto-populate-notice');
            notice.style.background = '#d4edda';
            notice.style.borderColor = '#27ae60';
            notice.querySelector('h3').textContent = '‚úÖ Data Synced Successfully!';
            notice.querySelector('p').textContent = `Synced ${debts.length} debt(s) from Debt Entry page.`;
            
            setTimeout(() => {
                notice.style.background = '#e8f4f8';
                notice.style.borderColor = '#3498db';
                notice.querySelector('h3').textContent = 'üí° Smart Data Sync';
                notice.querySelector('p').textContent = 'Data automatically syncs from your Debt Entry page. If no debts are entered there, use the fields below for single debt analysis.';
            }, 3000);
        }
    }

    // Initialize with sample debts
    function initializeSampleDebts() {
        debts = [
            {
                id: 1,
                name: 'Credit Card 1',
                balance: 15000,
                interestRate: 22.99,
                minimumPayment: 300
            },
            {
                id: 2,
                name: 'Credit Card 2',
                balance: 8500,
                interestRate: 18.5,
                minimumPayment: 170
            },
            {
                id: 3,
                name: 'Personal Loan',
                balance: 12000,
                interestRate: 12.5,
                minimumPayment: 250
            }
        ];
        renderDebts();
    }

    function addDebt() {
        const newId = debts.length > 0 ? Math.max(...debts.map(d => d.id)) + 1 : 1;
        debts.push({
            id: newId,
            name: `Debt ${newId}`,
            balance: 0,
            interestRate: 0,
            minimumPayment: 0
        });
        renderDebts();
    }

    function removeDebt(id) {
        debts = debts.filter(debt => debt.id !== id);
        renderDebts();
    }

    function renderDebts() {
        const container = document.getElementById('debts-container');
        container.innerHTML = '';

        debts.forEach(debt => {
            const debtElement = document.createElement('div');
            debtElement.className = 'debt-item';
            debtElement.innerHTML = `
                <div class="debt-header">
                    <input type="text" class="debt-name" value="${debt.name}" 
                           onchange="updateDebtName(${debt.id}, this.value)"
                           placeholder="Debt name">
                    <button class="remove-debt-btn" onclick="removeDebt(${debt.id})">Remove</button>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Current Balance ($)</label>
                        <input type="number" value="${debt.balance}" step="0.01"
                               onchange="updateDebtField(${debt.id}, 'balance', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Interest Rate (%)</label>
                        <input type="number" value="${debt.interestRate}" step="0.01"
                               onchange="updateDebtField(${debt.id}, 'interestRate', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Minimum Payment ($)</label>
                        <input type="number" value="${debt.minimumPayment}" step="0.01"
                               onchange="updateDebtField(${debt.id}, 'minimumPayment', this.value)">
                    </div>
                </div>
            `;
            container.appendChild(debtElement);
        });
    }

    function updateDebtName(id, value) {
        const debt = debts.find(d => d.id === id);
        if (debt) debt.name = value;
    }

    function updateDebtField(id, field, value) {
        const debt = debts.find(d => d.id === id);
        if (debt) debt[field] = parseFloat(value) || 0;
    }

    // Strategy selection
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('strategy-option')) {
            document.querySelectorAll('.strategy-option').forEach(opt => opt.classList.remove('active'));
            e.target.classList.add('active');
            currentStrategy = e.target.dataset.strategy;
        }
    });

    function calculatePayoffPlan() {
        const hasDebts = debts.length > 0 && debts.some(d => d.balance > 0);
        
        if (hasDebts) {
            // Multi-debt calculation
            calculateMultiDebt();
        } else {
            // Single debt calculation
            calculateSingleDebt();
        }
    }

    function calculateSingleDebt() {
        const principal = parseFloat(
```p
